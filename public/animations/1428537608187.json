{"name":"Simple Palette Plasma","filename":"1428537608187.js","author":"Ben","code":"// example code, renders a basic rainbow\nvar tweenedValues = {\n\thue: 0\n};\n\nreturn {\n\tinit: function(display,timeline) {\n\t\tthis.display = display;\n       // debugger;\n      \tdisplay.tween(tweenedValues,{\n          to: {hue: 255},\n          duration: 5000,\n          repeat: Infinity,\n          yoyo: true,\n          delay: 0,\n          easing: TWEEN.Easing.Cubic.InOut\n        });\n        this.initPalette(display);\n        this.initPlasma(display);\n\t},\n\tinitPalette: function(display) {\n\t  this.palette = [];\n\t  for (var i=0; i < 256; i++) {\n\t      var c = new Color();\n\t      c.setHSL(i/255, 1.0, 0.5);\n\t      this.palette.push(c);\n\t  }\n\t},\n\tinitPlasma: function(display) {\n\t   this.plasma = [];\n\t   var rnd = 2+Math.random()*4,\n\t        rnd2 = 64 + Math.random()*512;\n\t   for (var x=0; x < display.cols; x++) {\n\t       var row = [];\n\t       for (var y=0; y < display.rows; y++) {\n\t           row.push(Math.round((rnd2 + (rnd2 * Math.sin(x / rnd)) +\n\t                rnd2 + (rnd2 * ( Math.sin(y / rnd)))) / 2));\n\t       }\n\t       this.plasma.push(row);\n\t   }\n\t},\n\tonUpdate: function(display, data) {\n\t\tvar c = null;\n\n\t\tfor (var i=0; i < display.leds.length; i++) {\n\t\t\tvar x = i%display.cols,\n\t\t\t\ty = Math.floor(i/display.cols);\n\t\t\t\t\n\t\t\tc = this.palette[((this.plasma[x][y]) + Math.round(tweenedValues.hue)) % 255];\n\t\t\tdisplay.setColor(i,c);\n\t\t}\n\t}\n};","publish":true,"script":{}}