{"name":"Palette Plasma","filename":"1429052869155.js","author":"Ben","code":"// example code, renders a basic rainbow\r\nvar tweenedValues = {\r\n\thue: 0\r\n};\r\n\r\nreturn {\r\n\tinit: function(display,timeline) {\r\n\t\tthis.display = display;\r\n        //debugger;\r\n      \tdisplay.tween(tweenedValues,{\r\n          to: {hue: 1},\r\n          duration: 10000,\r\n          repeat: Infinity,\r\n          yoyo: false,\r\n          delay: 0\r\n        });\r\n        this.initPlasma(display);\r\n        \r\n        // lets create a simple palette\r\n        display.createPalette('redblue', [0xFF0000, 0x0000FF]);\r\n        \r\n        // randomizes the 4 random palettes 'random1' through 'random4'\r\n        display.randomizePalettes();\r\n        \r\n        // now pick a random palette\r\n        this.randomPalette = display.getRandomPalette();\r\n\t},\r\n\tinitPlasma: function(display) {\r\n\t   this.plasma = [];\r\n\t   for (var x=0; x < display.cols; x++) {\r\n\t       var row = [];\r\n\t       for (var y=0; y < display.rows; y++) {\r\n\t           row.push(Math.round((512 + (512 * Math.sin(x / 6)) +\r\n\t                512 + (512 * ( Math.sin(y / 6)))) / 2));\r\n\t       }\r\n\t       this.plasma.push(row);\r\n\t   }\r\n\t},\r\n\tonUpdate: function(display, data) {\r\n\t\tvar c = null;\r\n\r\n\t\tfor (var i=0; i < display.leds.length; i++) {\r\n\t\t\tvar x = i%display.cols,\r\n\t\t\t\ty = Math.floor(i/display.cols);\r\n\t\t\t\r\n\t\t\t// instead of using color values we ask the palette for one by providing\r\n\t\t\t// a value between 0 and 1 and a palette name (in this case random)\r\n\t\t\tc = display.getPaletteColor(this.randomPalette, (this.plasma[x][y]%512)/512 + tweenedValues.hue,true);\r\n\t\t\tdisplay.setColor(i,c);\r\n\t\t}\r\n\t}\r\n};","publish":true,"script":{}}